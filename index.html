<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>–ü–æ—Ç—É–∂–Ω–æ–º–µ—Ç—Ä</title>
<style>
/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: linear-gradient(to bottom, #0d1b2a, #1b263b);
  color: white;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  touch-action: manipulation;
}

header {
  text-align: center;
  padding: 15px 10px;
  text-shadow: 0 0 10px #ffcc00;
}

h1 { font-size: 2em; margin:0; }

main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 15px;
}

#power-container {
  width: 90%;
  max-width: 500px;
  height: 35px;
  background: #333;
  margin: 20px 0;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: inset 0 0 15px #000;
}

#power-bar {
  height: 100%;
  width: 0%;
  background: green;
  border-radius: 20px;
  transition: width 1s, background 0.5s;
}

.stats {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.stats div {
  font-size: 1em;
  padding: 8px 12px;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  transition: transform 0.2s, background 0.3s;
  flex: 1 1 30%;
  text-align: center;
}

.stats div:hover {
  transform: scale(1.05);
  background: rgba(255,255,255,0.15);
}

button {
  background: #ffcc00;
  color: black;
  border: none;
  padding: 12px 25px;
  font-size: 1em;
  border-radius: 10px;
  cursor: pointer;
  margin: 8px;
  box-shadow: 0 0 15px #ffcc00;
  transition: transform 0.2s, background 0.3s, box-shadow 0.3s;
}

button:hover {
  transform: translateY(-2px);
  background: #ffaa00;
  box-shadow: 0 0 20px #ffaa00;
}

#mood-text {
  font-size: 1.2em;
  margin-top: 8px;
  transition: color 0.5s;
  text-align: center;
}

footer {
  background: #1b263b;
  display: flex;
  justify-content: space-around;
  padding: 12px 0;
  box-shadow: 0 -5px 15px rgba(0,0,0,0.5);
}

footer button {
  flex: 1;
  margin: 0 5px;
  font-size: 1em;
  transition: background 0.3s, transform 0.2s;
}

footer button:hover {
  background: #ffaa00;
  transform: translateY(-2px);
}

section {
  display: none;
  width: 100%;
  max-width: 600px;
}

section.active {
  display: block;
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  color: white;
  font-size: 0.9em;
}

th, td {
  padding: 8px;
  border: 1px solid #fff;
  text-align: center;
}

th {
  background-color: #ffcc00;
  color: black;
}

td {
  background-color: rgba(255,255,255,0.1);
}

/* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ */
@media (min-width: 768px) {
  h1 { font-size: 2.2em; }
  #power-container { height: 40px; }
  .stats div { font-size: 1.2em; padding: 10px 15px; }
  button { font-size: 1.1em; padding: 12px 30px; }
}

@media (min-width: 1024px) {
  h1 { font-size: 2.5em; }
  #power-container { height: 45px; }
  .stats div { font-size: 1.3em; padding: 12px 20px; }
  button { font-size: 1.2em; padding: 15px 35px; }
}
</style>
</head>
<body>

<header>
  <h1>üî• –ü–æ—Ç—É–∂–Ω–æ–º–µ—Ç—Ä üî•</h1>
</header>

<main>
  <!-- –†–∞–∑–¥–µ–ª –ü–æ—Ç—É–∂–Ω–æ–º–µ—Ç—Ä -->
  <section id="game-section" class="active">
    <div id="power-container">
      <div id="power-bar"></div>
    </div>
    <div class="stats">
      <div>–†–µ–∑—É–ª—å—Ç–∞—Ç: <span id="power-value">0</span></div>
      <div>–û—á–∫–∏: <span id="points-value">0</span></div>
      <div>–ï–Ω–µ—Ä–≥—ñ—è: <span id="energy-value">50</span></div>
    </div>
    <div id="mood-text">–Ø —Å—É–º–Ω–∏–π üòî</div>
    <button onclick="measurePower()">–í–∏–º—ñ—Ä—è—Ç–∏ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</button>
    <button onclick="upgrade('energy')">–ü—Ä–æ–∫–∞—á–∞—Ç–∏ –µ–Ω–µ—Ä–≥—ñ—é (10 –æ—á–æ–∫)</button>
  </section>

  <!-- –†–∞–∑–¥–µ–ª –ú–∞–≥–∞–∑–∏–Ω -->
  <section id="shop-section">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <p>–¢—É—Ç –º–æ–∂–Ω–∞ –∫—É–ø–∏—Ç–∏ —Ä—ñ–∑–Ω—ñ –±–æ–Ω—É—Å–∏ –∞–±–æ –∫–æ—Å–º–µ—Ç–∏–∫—É –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.</p>
    <button onclick="alert('–ú–∞–≥–∞–∑–∏–Ω –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ!')">–ö—É–ø–∏—Ç–∏ –±–æ–Ω—É—Å</button>
  </section>

  <!-- –†–∞–∑–¥–µ–ª –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <section id="stats-section">
    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <div id="high-score">–ù–∞–π–≤–∏—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="high-score-value">0</span></div>

    <h3>–¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤</h3>
    <table id="leaderboard">
      <thead>
        <tr>
          <th>–ú—ñ—Å—Ü–µ</th>
          <th>–Ü–º'—è</th>
          <th>–û—á–∫–∏</th>
        </tr>
      </thead>
      <tbody>
        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –ª–∏–¥–µ—Ä—ã -->
      </tbody>
    </table>
  </section>
</main>

<footer>
  <button onclick="switchSection('game-section')">–ì—Ä–∞</button>
  <button onclick="switchSection('shop-section')">–ú–∞–≥–∞–∑–∏–Ω</button>
  <button onclick="switchSection('stats-section')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
</footer>

<script>
let points = parseInt(localStorage.getItem("points")) || 0;
let energy = parseInt(localStorage.getItem("energy")) || 50;
let highScore = parseInt(localStorage.getItem("highScore")) || 0;
let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];

document.getElementById("points-value").innerText = points;
document.getElementById("energy-value").innerText = energy;
document.getElementById("high-score-value").innerText = highScore;

function animateValue(id, start, end, duration) {
  let range = end - start;
  let current = start;
  let increment = range / (duration / 20);
  let obj = document.getElementById(id);
  let timer = setInterval(() => {
    current += increment;
    if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
      current = end;
      clearInterval(timer);
    }
    obj.innerText = Math.floor(current);
  }, 20);
}

function measurePower() {
  const value = Math.floor(Math.random() * 9999) + 1;
  const bar = document.getElementById("power-bar");
  const percent = Math.min(value / 9999 * 100, 100);
  bar.style.width = percent + "%";

  if(value < 1000) bar.style.background = "green";
  else if(value < 5000) bar.style.background = "yellow";
  else if(value < 9000) bar.style.background = "orange";
  else bar.style.background = "red";

  animateValue("power-value", 0, value, 1000);

  const earnedPoints = Math.floor(value / 100);
  points += earnedPoints;
  document.getElementById("points-value").innerText = points;

  if(value > highScore){
    highScore = value;
    document.getElementById("high-score-value").innerText = highScore;
    localStorage.setItem("highScore", highScore);
  }

  localStorage.setItem("points", points);
  localStorage.setItem("energy", energy);

  addToLeaderboard(prompt("–í–≤–µ–¥—ñ—Ç—å —Å–≤–æ—î —ñ–º'—è:"), points);
  updateMood();
}

function upgrade(type){
  if(points < 10){ alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –æ—á–æ–∫!"); return; }
  points -= 10;
  localStorage.setItem("points", points);
  document.getElementById("points-value").innerText = points;

  if(type === 'energy'){
    energy += 10;
    energy = Math.min(100, energy);
    localStorage.setItem("energy", energy);
    document.getElementById("energy-value").innerText = energy;
  }

  updateMood();
}

function updateMood(){
  const moodText = document.getElementById("mood-text");
  if(energy < 30) moodText.innerText = "–Ø —Å—É–º–Ω–∏–π üòî";
  else if(energy < 70) moodText.innerText = "–Ø —â–∞—Å–ª–∏–≤–∏–π üôÇ";
  else moodText.innerText = "–Ø –¥—É–∂–µ —â–∞—Å–ª–∏–≤–∏–π üòÑ";
}

function switchSection(sectionId){
  document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
  document.getElementById(sectionId).classList.add('active');
  if(sectionId === 'stats-section') renderLeaderboard();
}

function addToLeaderboard(name, score){
  if(!name) name = "–ì—Ä–∞–≤–µ—Ü—å";
  leaderboard.push({name: name, score: score});
  leaderboard.sort((a,b) => b.score - a.score);
  leaderboard = leaderboard.slice(0,10);
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
}

function renderLeaderboard(){
  const tbody = document.getElementById("leaderboard").querySelector("tbody");
  tbody.innerHTML = "";
  leaderboard.forEach((item,index)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${index+1}</td><td>${item.name}</td><td>${item.score}</td>`;
    tbody.appendChild(tr);
  });
}

updateMood();
renderLeaderboard();
</script>

</body>
</html>
