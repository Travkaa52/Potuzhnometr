<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>–ü–æ—Ç—É–∂–Ω–æ–º–µ—Ç—Ä –∑ –∫–æ—Ç–æ–º</title>
<style>
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  touch-action: manipulation;
  transition: background 1s;
  color:white;
  background: linear-gradient(to bottom, #1f1c2c, #928dab);
}

header { text-align: center; padding: 15px 10px; transition: text-shadow 1s; }
h1 { font-size: 2em; margin:0; }
#level-text { font-size: 1em; margin-top: 4px; }

main { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; padding:15px; }
#character-container { margin:15px 0; }
#cat-character { width:150px; transition: all 0.3s; }

#power-container { width:90%; max-width:500px; height:35px; background:#2b2b3b; margin:20px 0; border-radius:20px; overflow:hidden; box-shadow: inset 0 0 15px #000; transition: box-shadow 1s; }
#power-bar { height:100%; width:0%; background:#00ffd5; border-radius:20px; transition:width 1s, background 0.5s; }

.stats { display:flex; justify-content:space-between; gap:10px; margin-bottom:15px; flex-wrap:wrap; }
.stats div { font-size:1em; padding:8px 12px; background: rgba(255,255,255,0.05); border-radius:12px; flex:1 1 30%; text-align:center; transition:transform 0.2s, background 0.3s;}
.stats div:hover { transform: scale(1.05); background: rgba(255,255,255,0.15); }

button {
  background: linear-gradient(135deg, #ff6ec4, #7873f5);
  color: white; border: none; padding: 12px 25px; font-size: 1em; border-radius: 12px; cursor: pointer;
  margin: 8px; box-shadow: 0 0 15px rgba(255,110,196,0.6); transition: transform 0.2s, box-shadow 0.3s;
}
button:hover { transform: translateY(-2px); box-shadow: 0 0 25px rgba(255,110,196,0.9); }

#mood-text { font-size: 1.2em; margin-top: 8px; transition: color 0.5s; text-align:center; }
#level-display { font-size:1em; margin-top:4px; }

footer { background:#2b2b3b; display:flex; justify-content: space-around; padding:12px 0; box-shadow:0 -5px 15px rgba(0,0,0,0.5);}
footer button { flex:1; margin:0 5px; font-size:1em; transition: transform 0.2s, background 0.3s;}
footer button:hover { transform: translateY(-2px); }

section { display:none; width:100%; max-width:600px;}
section.active { display:block; animation:fadeIn 0.5s ease-in-out;}
@keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }

table { width:100%; border-collapse: collapse; margin-top:15px; color:white; font-size:0.9em;}
th, td { padding:8px; border:1px solid #fff; text-align:center;}
th { background-color:#ff6ec4; color:white;}
td { background-color: rgba(255,255,255,0.1);}
.skin-container { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px;}
.skin { cursor:pointer; padding:5px; border:2px solid #fff; border-radius:8px; transition: transform 0.2s, border-color 0.3s;}
.skin img { width:70px; height:70px;}
.skin:hover { transform: scale(1.1); border-color:#ff6ec4;}
</style>
</head>
<body>

<header>
<h1>üî• –ü–æ—Ç—É–∂–Ω–æ–º–µ—Ç—Ä üî•</h1>
<div id="level-text">–†—ñ–≤–µ–Ω—å: 1 / 100</div>
</header>

<main>
<section id="game-section" class="active">
<div id="character-container">
  <img id="cat-character" src="skins/cat_default.png" alt="–ö—ñ—Ç">
</div>

<div id="power-container"><div id="power-bar"></div></div>

<div class="stats">
<div>–†–µ–∑—É–ª—å—Ç–∞—Ç: <span id="power-value">0</span></div>
<div>–û—á–∫–∏: <span id="points-value">0</span></div>
<div>–ï–Ω–µ—Ä–≥—ñ—è: <span id="energy-value">50</span></div>
<div>–†—ñ–≤–µ–Ω—å: <span id="level-value">1</span></div>
</div>

<div id="mood-text">–Ø —Å—É–º–Ω–∏–π üòî</div>

<button id="measure-btn" onclick="measurePower()">–í–∏–º—ñ—Ä—è—Ç–∏ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å</button>
<button onclick="upgrade('energy')">–ü—Ä–æ–∫–∞—á–∞—Ç–∏ –µ–Ω–µ—Ä–≥—ñ—é (10 –æ—á–æ–∫)</button>
</section>

<section id="shop-section">
<h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
<p>–ü–æ–∫—É–ø–∞–π—Ç–µ —Å–∫–∏–Ω–∏ —Ç–∞ –±–æ–Ω—É—Å–∏ –∑–∞ –æ—á–∫–∏.</p>
<button onclick="buyItem('bonus1',5)">–ö—É–ø–∏—Ç–∏ –±–æ–Ω—É—Å 1 (+5 –µ–Ω–µ—Ä–≥—ñ—ó)</button>
<button onclick="buyItem('bonus2',10)">–ö—É–ø–∏—Ç–∏ –±–æ–Ω—É—Å 2 (+10 –µ–Ω–µ—Ä–≥—ñ—ó)</button>

<h3>–°–∫–∏–Ω–∏</h3>
<div class="skin-container">
  <div class="skin" onclick="applySkin('cat_default.png')"><img src="skins/cat_default.png"><p>–ë–∞–∑–æ–≤–∏–π</p></div>
  <div class="skin" onclick="applySkin('cat_warrior.png')"><img src="skins/cat_warrior.png"><p>–í–æ—ó–Ω (50 –æ—á–æ–∫)</p></div>
  <div class="skin" onclick="applySkin('cat_mage.png')"><img src="skins/cat_mage.png"><p>–ú–∞–≥ (70 –æ—á–æ–∫)</p></div>
</div>
</section>

<section id="stats-section">
<h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
<div id="high-score">–ù–∞–π–≤–∏—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="high-score-value">0</span></div>
<h3>–¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤</h3>
<table id="leaderboard">
<thead><tr><th>–ú—ñ—Å—Ü–µ</th><th>–Ü–º'—è</th><th>–û—á–∫–∏</th></tr></thead>
<tbody></tbody>
</table>
</section>

</main>

<footer>
<button onclick="switchSection('game-section')">–ì—Ä–∞</button>
<button onclick="switchSection('shop-section')">–ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="switchSection('stats-section')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
</footer>

<script>
// –Ü–º'—è Telegram
const tg = window.Telegram?.WebApp;
const username = tg?.initDataUnsafe?.user?.username || tg?.initDataUnsafe?.user?.first_name || "–ì—Ä–∞–≤–µ—Ü—å";

// –î–∞–Ω—ñ –≥—Ä–∞–≤—Ü—è
let points = parseInt(localStorage.getItem("points"))||0;
let energy = parseInt(localStorage.getItem("energy"))||50;
let highScore = parseInt(localStorage.getItem("highScore"))||0;
let level = parseInt(localStorage.getItem("level"))||1;
let xp = parseInt(localStorage.getItem("xp"))||0;
let leaderboard = JSON.parse(localStorage.getItem("leaderboard"))||[];
let currentSkin = localStorage.getItem("catSkin")||"cat_default.png";
const catImg = document.getElementById("cat-character");

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—è UI
function updateUI(){
document.getElementById("points-value").innerText=points;
document.getElementById("energy-value").innerText=energy;
document.getElementById("high-score-value").innerText=highScore;
document.getElementById("level-value").innerText=level;
catImg.src="skins/"+currentSkin;
updateMood();
updateTheme();
}
updateUI();

// –õ—ñ–º—ñ—Ç –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å
let measureCount=0;
let lastReset=Date.now();

// –§—É–Ω–∫—Ü—ñ—è –∑–º—ñ–Ω–∏ —Ç–µ–º–∏ –∫–æ–∂–Ω—ñ 3 —Ä—ñ–≤–Ω—ñ
function updateTheme(){
const headers=document.querySelector('header');
const body=document.body;
const themeLevel=Math.floor(level/3)%3;
switch(themeLevel){
  case 0: body.style.background="linear-gradient(to bottom, #1f1c2c, #928dab)"; headers.style.textShadow="0 0 15px #00ffd5"; break;
  case 1: body.style.background="linear-gradient(to bottom, #42275a, #734b6d)"; headers.style.textShadow="0 0 15px #ff6ec4"; break;
  case 2: body.style.background="linear-gradient(to bottom, #283e51, #485563)"; headers.style.textShadow="0 0 15px #00ffea"; break;
}
}

// –ê–Ω—ñ–º–∞—Ü—ñ—è –∫–æ—Ç–∞
function animateCat(){ catImg.style.transform="scale(1.1)"; setTimeout(()=>{catImg.style.transform="scale(1)";},300); }

// –í–∏–º—ñ—Ä –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ
function measurePower(){
const now=Date.now();
if(now-lastReset>5*60*
